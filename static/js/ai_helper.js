// Generated by CoffeeScript 1.3.3
(function() {
  var API, G, M, V, counter_darken, red, white, _ref;

  _ref = [window._ai_helper = {}, window._view, window._mote, window._geom], API = _ref[0], V = _ref[1], M = _ref[2], G = _ref[3];

  API.same = function(strain) {
    return function(m) {
      return m.strain === strain;
    };
  };

  white = one.color('#fff');

  red = 'rgb(255,0,0)';

  counter_darken = 'rgba(0,0,0,0.5)';

  API.draw_counter = function(ctx, mote, prog) {
    var passed_angle, r, start_angle, x, y;
    x = mote.x, y = mote.y, r = mote.radius;
    if (prog > 0) {
      passed_angle = (1 - prog) * 2 * G.pi;
      start_angle = -0.5 * G.pi;
      ctx.fillStyle = counter_darken;
      ctx.beginPath();
      ctx.moveTo(V.a * x, V.a * y);
      ctx.arc(V.a * x, V.a * y, V.a * r, start_angle, start_angle + passed_angle, false);
      return ctx.fill();
    }
  };

  API.draw_targets = function(ctx, mote, targets) {
    ctx.lineWidth = 1;
    return _.each(targets, function(target, i) {
      ctx.strokeStyle = i === 0 ? red : (white.alpha(1 - i / targets.length)).cssa();
      ctx.beginPath();
      ctx.moveTo(V.a * mote.x, V.a * mote.y);
      ctx.lineTo(V.a * target.x, V.a * target.y);
      return ctx.stroke();
    });
  };

}).call(this);
